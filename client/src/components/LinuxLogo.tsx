import { useEffect, useRef } from 'react';
import { motion } from 'framer-motion';

interface LinuxLogoProps {
  size?: number;
  color?: string;
  className?: string;
}

const LinuxLogo = ({ size = 40, color = "currentColor", className = "" }: LinuxLogoProps) => {
  const logoRef = useRef<HTMLDivElement>(null);
  
  // Float animation effect
  const floatAnimation = {
    y: [0, -5, 0],
    rotate: [0, 2, -2, 0],
    transition: {
      duration: 5,
      repeat: Infinity,
      repeatType: "reverse" as const,
      ease: "easeInOut"
    }
  };
  
  // Random stars creation
  useEffect(() => {
    if (!logoRef.current) return;
    
    const container = logoRef.current;
    const containerRect = container.getBoundingClientRect();
    
    // Remove existing stars
    const existingStars = container.querySelectorAll('.star');
    existingStars.forEach(star => star.remove());
    
    // Create stars
    const starCount = 15;
    for (let i = 0; i < starCount; i++) {
      const star = document.createElement('div');
      star.classList.add('star');
      
      // Random positioning
      const x = Math.random() * containerRect.width;
      const y = Math.random() * containerRect.height;
      
      // Random size and opacity
      const size = Math.random() * 3 + 1;
      const opacity = Math.random() * 0.5 + 0.3;
      
      // Apply styles
      star.style.width = `${size}px`;
      star.style.height = `${size}px`;
      star.style.left = `${x}px`;
      star.style.top = `${y}px`;
      star.style.opacity = `${opacity}`;
      
      // Random animation delay
      star.style.animationDelay = `${Math.random() * 5}s`;
      
      container.appendChild(star);
    }
  }, []);
  
  return (
    <div ref={logoRef} className={`linux-logo-container relative ${className}`}>
      <motion.svg
        animate={floatAnimation}
        width={size}
        height={size}
        viewBox="0 0 512 512"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="relative z-10"
      >
        <path
          d="M256 113.725C237.472 113.725 222.459 128.738 222.459 147.266C222.459 165.794 237.472 180.807 256 180.807C274.528 180.807 289.541 165.794 289.541 147.266C289.541 128.738 274.528 113.725 256 113.725Z"
          fill={color}
        />
        <path
          d="M366.969 284.675C345.865 268.587 336.028 247.877 335.877 224.863C335.575 181.865 335.575 156.799 323.686 139.145C308.38 116.733 284.167 110.804 263.366 108.401C260.056 108.099 256.746 107.797 253.738 107.496C243.297 106.591 231.711 106.591 222.821 109.599C197.452 118.533 185.261 140.653 184.809 172.628C184.508 187.028 184.357 197.62 181.198 207.457C176.935 220.754 169.138 232.34 155.387 246.394C144.04 258.132 132.755 266.461 124.275 275.89C118.648 282.121 114.235 288.353 111.227 294.887C108.219 301.118 106.863 307.953 107.165 314.939C107.165 321.321 108.823 328.158 113.691 335.295C118.347 342.131 124.878 347.758 129.595 351.521C136.879 357.298 151.582 365.627 166.737 369.993C179.038 373.605 191.791 374.813 201.727 371.503C209.301 369.088 215.532 363.905 222.217 352.407C225.376 347.84 228.685 343.273 232.297 338.706C237.321 332.173 242.646 326.094 248.123 320.617C249.93 318.81 252.04 317.002 254.3 315.196C256.409 313.539 258.821 311.882 261.539 310.496C268.224 306.885 275.968 305.68 283.111 304.926C289.645 304.172 295.272 300.711 299.036 294.887C302.798 289.064 304.152 281.669 302.798 274.424C301.744 268.587 302.043 263.717 307.669 260.105C313.898 256.191 322.377 254.987 326.291 254.535C340.341 252.88 347.329 244.25 349.442 236.855C351.552 229.461 350.19 221.463 346.124 214.672C357.32 234.784 367.705 257.649 366.969 284.675Z"
          fill={color}
        />
        <path
          d="M309.173 310.798C310.678 310.798 311.431 310.647 311.431 310.647C311.431 310.647 310.678 310.496 309.023 310.496C308.269 310.496 307.516 310.496 306.913 310.798C307.516 310.647 308.269 310.798 309.173 310.798Z"
          fill={color}
        />
        <path
          d="M258.006 402.723C257.252 396.886 255.897 393.577 254.693 390.267C252.582 384.883 250.02 379.649 248.363 374.416C245.656 366.116 244.754 359.58 246.558 352.336C248.514 344.187 250.925 338.954 249.87 329.266C248.967 320.637 245.053 313.09 242.648 306.146C239.79 297.969 236.481 290.424 232.42 283.482C229.111 277.796 225.349 272.562 221.436 267.629C212.804 256.938 203.266 246.548 192.727 236.911C187.946 232.431 183.315 228.066 178.682 223.736C172.995 218.352 167.913 213.121 163.395 206.932C158.264 199.839 154.05 192.294 150.892 184.147C147.885 176.45 145.623 164.055 145.321 154.721C145.17 149.186 145.623 143.953 146.679 139.185C148.337 131.338 151.948 124.998 155.861 119.01C164.491 104.761 177.345 95.224 181.259 92.518C184.267 90.412 193.954 83.621 194.255 83.47C194.254 83.47 192.444 84.676 189.589 87.232C186.731 89.639 183.274 93.553 181.616 95.364C176.384 101.351 170.698 109.499 166.634 118.585C162.571 127.521 160.162 136.607 160.162 145.996C160.162 150.929 160.765 155.861 161.972 161.094C165.129 176.298 173.759 189.154 181.766 199.391C184.622 203.456 187.629 207.069 190.637 210.681C184.77 217.02 180.406 223.807 177.248 230.599C173.789 238.144 171.843 245.841 170.939 253.084C169.583 265.027 171.09 276.064 174.249 285C176.656 291.591 179.814 297.277 183.576 301.945C185.536 304.35 187.494 306.605 189.602 308.562C191.259 310.066 193.069 311.573 195.023 312.777C204.017 318.462 213.406 321.319 222.799 324.177C227.881 325.683 232.962 327.19 237.895 329.147C242.829 331.103 247.611 333.51 252.091 336.367C255.852 338.774 259.463 341.481 262.772 344.79C266.536 348.102 269.845 351.865 272.954 356.043C276.415 360.822 279.573 366.055 283.185 371.741C284.541 374.146 286.047 376.703 287.704 379.258C289.21 381.814 290.866 384.221 292.372 386.627C295.53 391.408 298.99 396.038 302.753 399.953C306.667 404.019 310.883 407.48 315.212 410.184C319.728 412.892 324.511 415.146 329.593 416.653C332.298 417.558 335.156 418.16 338.013 418.612C340.72 419.064 343.577 419.215 346.283 419.215C349.592 419.215 352.901 418.612 356.06 417.558C359.219 416.502 362.226 414.997 364.933 412.892C370.317 408.979 373.626 402.842 374.982 395.901C376.337 388.961 376.186 381.568 374.83 374.929C373.474 368.291 371.065 361.957 368.056 356.649C371.969 362.636 375.28 368.771 377.083 375.713C378.891 382.503 379.1 390.047 377.234 397.139C376.339 400.9 374.831 404.361 372.575 407.672C370.47 410.831 367.765 413.689 364.608 416.046C354.671 423.279 341.374 422.374 332.75 419.819C324.279 417.41 316.961 412.482 311.578 407.068C305.892 401.534 301.226 394.744 297.463 387.352C293.701 379.96 290.24 372.11 286.478 364.263C282.867 356.417 279.105 349.174 274.156 345.09C269.37 340.835 266.212 339.932 262.44 339.027C258.681 338.122 254.466 337.369 249.987 335.864C245.656 334.357 241.029 332.251 236.244 329.695C227.279 324.914 219.436 319.077 212.949 311.23C206.462 303.535 201.686 293.89 198.83 282.896C195.975 272.052 195.219 259.95 196.575 248.352C197.63 239.718 200.034 231.42 203.947 223.422C207.708 215.275 212.646 207.58 218.332 199.884C219.537 198.075 220.74 196.266 222.097 194.457C223.301 192.647 224.505 190.838 225.86 188.884C227.367 187.076 228.874 185.267 230.229 183.308C240.769 167.907 246.304 152.355 247.812 136.2C249.168 121.499 247.207 106.646 242.728 92.398C238.252 78.301 230.99 64.355 221.6 51.654C210.251 36.499 197.144 25.26 196.849 25.112C196.847 25.112 227.817 62.405 238.866 100.753C244.551 120.297 245.755 139.088 243.352 156.894C240.949 174.245 235.118 190.402 226.034 204.801C229.344 207.658 232.956 210.213 236.719 212.318C245.502 217.099 253.65 220.258 261.955 224.473C264.209 225.679 266.465 226.883 268.721 228.089C271.126 229.295 273.382 230.499 275.636 231.856C280.115 234.411 284.295 237.417 287.906 240.877C291.517 244.338 294.525 248.101 296.486 252.127C298.447 256.341 299.653 260.556 299.502 264.921C299.351 269.249 298.144 273.466 296.334 277.378C291.758 286.213 283.429 293.456 274.799 297.067C270.437 298.876 266.069 299.932 261.686 300.687C259.582 301.138 257.345 301.285 255.24 301.591C253.16 301.895 250.998 302.346 248.971 303.099C245.035 304.456 241.377 306.868 238.22 309.727C235.213 312.433 232.808 315.441 230.855 318.901C226.791 325.34 223.935 332.882 221.378 341.064C217.616 353.609 214.76 367.101 210.091 379.496C208.131 385.431 205.879 391.118 203.32 396.2C200.764 401.433 197.756 406.064 194.446 410.128C187.962 418.276 180.42 424.711 172.723 428.322C164.875 431.934 157.33 432.686 150.689 431.631C150.689 431.631 174.753 436.41 196.761 424.316C205.239 419.69 213.117 412.753 219.557 404.455C222.867 400.239 225.875 395.608 228.429 390.677C229.738 388.113 230.883 385.572 231.948 383.037C233.119 380.35 234.174 377.793 235.078 374.784C236.131 372.371 237.034 369.815 237.787 367.107C249.738 335.284 250.342 323.644 258.006 402.723Z"
          fill={color}
        />
      </motion.svg>
    </div>
  );
};

export default LinuxLogo;